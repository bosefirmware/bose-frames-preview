window.Granite = window.Granite || {};
Granite.Sling={SELECTOR_INFINITY:".infinity",CHARSET:"_charset_",STATUS:":status",STATUS_BROWSER:"browser",OPERATION:":operation",OPERATION_DELETE:"delete",OPERATION_MOVE:"move",DELETE_SUFFIX:"@Delete",TYPEHINT_SUFFIX:"@TypeHint",COPY_SUFFIX:"@CopyFrom",MOVE_SUFFIX:"@MoveFrom",ORDER:":order",REPLACE:":replace",DESTINATION:":dest",SAVE_PARAM_PREFIX:":saveParamPrefix",IGNORE_PARAM:":ignore",REQUEST_LOGIN_PARAM:"sling:authRequestLogin",LOGIN_URL:"/system/sling/login.html",LOGOUT_URL:"/system/sling/logout.html"};
!function(e,t){e.Util=function(){var e={patchText:function(e,n){if(n)if(t.isArray(n))for(var r=0;r<n.length;r++)e=e.replace("{"+r+"}",n[r]);else e=e.replace("{0}",n);return e},getTopWindow:function(){var e=window;if(this.iFrameTopWindow)return this.iFrameTopWindow;try{for(;e.parent&&e!==e.parent&&e.parent.location.href;)e=e.parent}catch(t){}return e},setIFrameMode:function(e){this.iFrameTopWindow=e||window},applyDefaults:function(){for(var t,n=arguments[0]||{},r=1;r<arguments.length;r++){t=arguments[r];for(var i in t){var o=t[i];t.hasOwnProperty(i)&&o&&(n[i]="object"!=typeof o||o instanceof Array?o instanceof Array?o.slice(0):o:e.applyDefaults(n[i],o))}}return n},getKeyCode:function(e){return e.keyCode?e.keyCode:e.which}};return e}()}(Granite,jQuery);
!function(Granite,util,sling,$){Granite.HTTP=function(){var contextPath=null,SCRIPT_URL_REGEXP=/^(?:http|https):\/\/[^\/]+(\/.*)\/(?:etc(\/.*)*\/clientlibs|libs(\/.*)*\/clientlibs|apps(\/.*)*\/clientlibs).*\.js(\?.*)?$/,ENCODE_PATH_REGEXP=/[^1\w-\.!~\*'\(\)\/%;:@&=\$,]/,loginRedirected=!1,self={};return self.getSchemeAndAuthority=function(e){var t;try{return-1==e.indexOf("://")?"":(t=e.indexOf("/",e.indexOf("://")+3),-1==t?e:e.substring(0,t))}catch(n){return""}},self.getContextPath=function(){return contextPath},self.detectContextPath=function(){try{if(window.CQURLInfo)contextPath=CQURLInfo.contextPath||"";else{for(var e=document.getElementsByTagName("script"),t=0;t<e.length;t++){var n=SCRIPT_URL_REGEXP.exec(e[t].src);if(n)return void(contextPath=n[1])}contextPath=""}}catch(r){}},self.externalize=function(e){try{0==e.indexOf("/")&&contextPath&&0!=e.indexOf(contextPath+"/")&&(e=contextPath+e)}catch(t){}return e},self.internalize=function(e,t){if("/"==e.charAt(0))return contextPath===e?"":contextPath&&0==e.indexOf(contextPath+"/")?e.substring(contextPath.length):e;t||(t=document);var n=self.getSchemeAndAuthority(t.location.href),r=self.getSchemeAndAuthority(e);return n==r?e.substring(r.length+(contextPath?contextPath.length:0)):e},self.getPath=function(e){if(e)e=self.removeParameters(e),e=self.removeAnchor(e);else{if(window.CQURLInfo&&CQURLInfo.requestPath)return CQURLInfo.requestPath;e=window.location.pathname}e=self.internalize(e);var t=e.indexOf(".",e.lastIndexOf("/"));return-1!=t&&(e=e.substring(0,t)),e},self.removeAnchor=function(e){return-1!=e.indexOf("#")?e.substring(0,e.indexOf("#")):e},self.removeParameters=function(e){return-1!=e.indexOf("?")?e.substring(0,e.indexOf("?")):e},self.encodePathOfURI=function(e){var t,n;return-1!=e.indexOf("?")?(t=e.split("?"),n="?"):-1!=e.indexOf("#")?(t=e.split("#"),n="#"):t=[e],ENCODE_PATH_REGEXP.test(t[0])&&(t[0]=self.encodePath(t[0])),t.join(n)},self.encodePath=function(e){return e=encodeURI(e).replace(/%5B/g,"[").replace(/%5D/g,"]"),e=e.replace(/\+/g,"%2B"),e=e.replace(/\?/g,"%3F"),e=e.replace(/;/g,"%3B"),e=e.replace(/#/g,"%23"),e=e.replace(/=/g,"%3D"),e=e.replace(/\$/g,"%24"),e=e.replace(/,/g,"%2C"),e=e.replace(/'/g,"%27"),e=e.replace(/"/g,"%22")},self.handleLoginRedirect=function(){if(!loginRedirected){loginRedirected=!0,alert(Granite.I18n.get("Your request could not be completed because you have been signed out."));var e=util.getTopWindow().document.location;e.href=self.externalize(sling.LOGIN_URL)+"?resource="+encodeURIComponent(e.pathname+e.search+e.hash)}},self.getXhrHook=function(e,t,n){if(t=t||"GET",window.G_XHR_HOOK&&$.isFunction(G_XHR_HOOK)){var r={url:e,method:t};return n&&(r.params=n),G_XHR_HOOK(r)}return null},self.eval=function(response){"object"!=typeof response&&(response=$.ajax({url:response,type:"get",async:!1}));try{return eval("("+(response.body?response.body:response.responseText)+")")}catch(e){}return null},self}()}(Granite,Granite.Util,Granite.Sling,jQuery);
!function(e,t,n,r,o){t.I18n=function(){var t={},i="/libs/cq/i18n/dict.",a=".json",s=void 0,c=!1,u=null,l={},f=!1,h=function(e){if(f)return i+e+a;var t=o("html").attr("data-i18n-dictionary-src");return t?t.replace("{locale}",encodeURIComponent(e)).replace("{+locale}",e):i+e+a};return l.LOCALE_DEFAULT="en",l.PSEUDO_LANGUAGE="zz",l.PSEUDO_PATTERN_KEY="_pseudoPattern_",l.init=function(e){e=e||{},this.setLocale(e.locale),this.setUrlPrefix(e.urlPrefix),this.setUrlSuffix(e.urlSuffix)},l.setLocale=function(e){e&&(s=e)},l.getLocale=function(){return o.isFunction(s)&&(s=s()),s||e.documentElement.lang||l.LOCALE_DEFAULT},l.setUrlPrefix=function(e){e&&(i=e,f=!0)},l.setUrlSuffix=function(e){e&&(a=e,f=!0)},l.getDictionary=function(e){if(e=e||l.getLocale(),!t[e]){c=0==e.indexOf(l.PSEUDO_LANGUAGE);try{var n=o.ajax(h(e),{async:!1,dataType:"json"});t[e]=o.parseJSON(n.responseText)}catch(r){}t[e]||(t[e]={})}return t[e]},l.get=function(e,t,r){var o,i,a;return o=l.getDictionary(),a=c?l.PSEUDO_PATTERN_KEY:r?e+" (("+r+"))":e,o&&(i=o[a]),i||(i=e),c&&(i=i.replace("{string}",e).replace("{comment}",r?r:"")),n.patchText(i,t)},l.getVar=function(e,t){return e?l.get(e,null,t):null},l.getLanguages=function(){if(!u)try{var e=r.eval("/libs/wcm/core/resources/languages.overlay.infinity.json");o.each(e,function(e,t){t.title=l.getVar(t.language),t.title&&t.country&&"*"!=t.country&&(t.title+=" ("+l.getVar(t.country)+")")}),u=e}catch(t){u={}}return u},l.parseLocale=function(e){if(!e)return null;var t=e.indexOf("_");0>t&&(t=e.indexOf("-"));var n,r;return 0>t?(n=e,r=null):(n=e.substring(0,t),r=e.substring(t+1)),{code:e,language:n,country:r}},l}()}(document,Granite,Granite.Util,Granite.HTTP,jQuery);
!function(e,t){var n=function(){var e={visibility:"hidden",position:"absolute",width:"30px",height:"30px","-webkit-border-radius":"20px","border-radius":"20px",border:"5px solid orange","-webkit-user-select":"none","user-select":"none",opacity:"0.5","z-index":"2000","pointer-events":"none"},n={},r=[];return{debugWithMouse:!1,init:function(){var e=this;t(document).on("touchstart.touchindicator touchmove.touchindicator touchend.touchindicator",function(t){var n=t.originalEvent.touches;return e.update(n),!0}),this.debugWithMouse&&t(document).on("mousemove.touchindicator",function(t){return t.identifer="fake",e.update([t]),!0})},update:function(i){for(var o={},a=0;a<i.length;a++){var s=i[a],u=s.identifier,l=n[u];l||(l=r.pop(),l||(l=t("<div></div>").css(e),t("body").append(l))),o[u]=l,l.offset({left:s.pageX-20,top:s.pageY-20}),l.css("visibility","visible")}for(u in n)n.hasOwnProperty(u)&&!o[u]&&(l=n[u],l.css("visibility","hidden"),r.push(l));n=o}}};e.TouchIndicator=new n}(Granite,jQuery);
!function(n,e,t,r){n.OptOutUtil=function(){var n={},e=[],t=[];return n.init=function(n){n&&(e=n.cookieNames?n.cookieNames:e,t=n.whitelistCookieNames?n.whitelistCookieNames:t)},n.getCookieNames=function(){return e},n.getWhitelistCookieNames=function(){return t},n.isOptedOut=function(){for(var e=document.cookie.split(";"),t=0;t<e.length;t++){var u=e[t],o=r.trim(u.split("=")[0]);if(r.inArray(o,n.getCookieNames())>-1)return!0}return!1},n.maySetCookie=function(e){return!(n.isOptedOut()&&-1===r.inArray(e,n.getWhitelistCookieNames()))},n}()}(Granite,Granite.Util,Granite.HTTP,jQuery);
Granite.OptOutUtil.init(window.GraniteOptOutConfig), Granite.HTTP.detectContextPath();
