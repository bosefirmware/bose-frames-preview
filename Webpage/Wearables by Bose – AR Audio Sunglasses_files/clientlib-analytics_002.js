var Bose=Bose||{};Bose.Analytics=function(){function a(){if("undefined"==typeof window||"function"!=typeof window.analyticstracker)return void window.console.error("Bose.Analytics: Script containing the analytics framework is not being loaded");try{i=window.analyticstracker(),b(),c(),d(),e(),f(),g(),$jq(document).on("click","[data-tracking-event$=-click]",i.trackInteraction)}catch(a){window.console.error("Bose.Analytics: Script is not able to instantiate")}}function b(){Bose.Analytics.Page.init(i)}function c(){Bose.Analytics.Button.init()}function d(){Bose.Analytics.ContentBlock.init(i)}function e(){Bose.Analytics.Filter.init(i)}function f(){Bose.Analytics.Product.init()}function g(){i.trackImpression("product-detailimpression",{checkVisibility:!1}),i.trackImpression("product-subdetailimpression",{checkVisibility:!1}),i.trackImpression("button-impression"),i.trackImpression("contentblock-impression"),i.trackImpression("filter-impression"),i.trackImpression("navigation-impression"),i.trackImpression("product-impression",{doCollect:!0}),setTimeout(g,500)}function h(a,b){return{index:b+1||0,total:a.length}}var i;return{init:a,indexEvent:h,analyticsAttributes:{event:"data-tracking-event",info:"data-tracking-info",commerce:"data-tracking-commerce"}}}();
var Bose=Bose||{};Bose.Analytics=Bose.Analytics||{},Bose.Analytics.Page=function(){function a(a){var d=Bose.Utils.getCategoryPathSegments(),e=window.performance.timing.domContentLoadedEventEnd-window.performance.timing.navigationStart,f=c(),g=b();a.trackImpression("page-impression",{addData:{info:{category:d[0],loadtime:e,variant:g,loggedin:f}}})}function b(){var a=Bose.Utils.getCurrentHref(),b=a.match("(?=bose-).*(?=.html)"),c="A";return null!==b&&(c=b[0]),c}function c(){var a=$jq(".gigya-api-key"),b="no";if(a.length){var c=a.val();c&&Bose.CookieStore.get("glt_"+c)&&(b="yes")}return b}return{init:a}}();
var Bose=Bose||{};Bose.Analytics=Bose.Analytics||{},Bose.Analytics.Button=function(){function a(){b()}function b(){$jq(".productCallToActions .bose-cta.js-cta").not(".bose-cta--hide").each(function(){var a=$jq(this),b=a.find("a"),c=a.data("tracking-info");void 0===b.attr(Bose.Analytics.analyticsAttributes.info)&&void 0!==c&&b.attr(Bose.Analytics.analyticsAttributes.info,JSON.stringify(c))})}return{init:a}}();
var Bose=Bose||{};Bose.Analytics=Bose.Analytics||{},Bose.Analytics.ContentBlock=function(){function a(a){c=a,$jq(document).on("analyticsHotspot",b)}function b(a,b,d,e){var f,g=$jq(e).data("info");f="open"===b?{clickStatus:"open"}:{clickStatus:"close"};var h=$jq.extend(g,f),i={event:"contentblock-click",info:h};c.trackEvent(i)}var c;return{init:a}}();
var Bose=Bose||{};Bose.Analytics=Bose.Analytics||{},Bose.Analytics.Filter=function(){function a(a){e=a,$jq(document).on("analyticsUpdateFilter",b)}function b(a,b){var f=$jq(b),g=f.closest(".bose-productDrawer__container"),h=f.hasClass("bose-radioButton__input"),i=h?f.closest(".bose-radioButton"):f.closest(".bose-checkbox"),j=i.data("info")||"",k=h?$jq(".analytics-tracking__radio-"+j):$jq(".analytics-tracking__"+j),l=k.data("info")||"",m=c(i),n=d(j,h,g),o=$jq.extend(l,n,m),p={event:"filter-click",info:o};e.trackEvent(p)}function c(a){return"false"===a.attr("aria-checked")?{clickStatus:"check"}:{clickStatus:"uncheck"}}function d(a,b,c){var d,e=c.find(".bose-productDrawerFacet").not(".bose-radioButton__sortby"),f=c.find(".bose-radioButton__sortby"),g=[];return e.each(function(){var c=$jq(this),d=c.attr("aria-checked"),e=c.data("info"),f=c.hasClass("bose-radioButton");("true"===d&&b&&!f||"false"===d&&a===e||"true"===d&&!b)&&g.push(e)}),f.each(function(){var b=$jq(this),c=b.attr("aria-checked"),e=b.data("info"),f=b.data("info-label");e&&("true"===c||"false"===c&&a===e)&&(d=f)}),{result:g,sortby:d}}var e;return{init:a}}();
var Bose=Bose||{};Bose.Analytics=Bose.Analytics||{},Bose.Analytics.Product=function(){function a(){f=$jq(m.productTile),g=$jq(".productpage-tracking-analytics"),h=$jq(".subproductpage-tracking-analytics"),i=$jq(".bose-productPage"),j=$jq(".bose-productSubPageContainer"),b(f,"product-impression",k),b(g,"product-detailimpression",l),b(h,"product-subdetailimpression",l),$jq(document).on("analyticsUpdateProductTile",e)}function b(a,b,e){var f,g,h,i,j;f=e?a.filter(function(){return $jq(this).is(":visible")}):a,f.each(function(a){var k,l,m=$jq(this),n=m.data("accessory"),o=m.hasClass("bose-productTile2016"),p=m.hasClass("bose-productTile2016--variantShop"),q=c(m,"a",n,o),r=m.data("commerce");p||"product-subdetailimpression"===b?(i=c(m,".bose-price__price",n,o),j=c(m,".js-bose-originalTotalPrice",n,o)):(i=c(m,".js-productPriceSummary__price",n,o),j=c(m,".bose-productPriceSummary__price--original",n,o)),r&&(k=i.data("price")||"",l=j.data("price")||"",k?(h=l?{price:l,discount:k}:{price:k},g=$jq.extend(r,h,Bose.Analytics.indexEvent(f,a))):g=$jq.extend(r,Bose.Analytics.indexEvent(f,a)),m.attr(Bose.Analytics.analyticsAttributes.event,b),m.attr(Bose.Analytics.analyticsAttributes.commerce,JSON.stringify(g)),e&&d(q,g))})}function c(a,b,c,d){var e=a.find(b);return d?e:(g.length?e=i.find(b):h.length&&!c&&(e=j.find(b)),e)}function d(a,b){a.each(function(){var a=$jq(this),c=a.attr("title")||"",d=a.attr("href")||"",e={linkTitle:c,linkUrl:d,source:c.length>0?c.toLowerCase():"clickthrough"},f=$jq.extend(b,e);a.attr(Bose.Analytics.analyticsAttributes.event,"product-click"),a.attr(Bose.Analytics.analyticsAttributes.commerce,JSON.stringify(f))})}function e(){b($jq(m.productTile),"product-impression",k)}var f,g,h,i,j,k=!0,l=!1,m={productTile:".bose-productTile2016"};return{init:a,loadMoreProductTiles:e}}();
$jq(document).ready(function(){Bose.Analytics.init()});
